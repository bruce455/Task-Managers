{{!-- views/pages/profile.hbs — updated layout --}}
<div class="profile-page container pt-5 mt-4">

  {{!-- ── USER INFO ─────────────────────────────────────────────── --}}
  <section class="section-box user-info p-4 rounded">
    <div class="text-center mb-4">
      <i class="far fa-user-circle fa-4x d-block mb-2"></i>
      <h2 class="fw-bold mb-0">Your Profile</h2>
    </div>

    <ul class="list-unstyled lh-lg mb-4 text-center">
      <li><strong>Username:</strong> {{user.username}}</li>
      <li><strong>Email:</strong> {{user.email}}</li>
      <li><strong>Password:</strong> ••••••••</li>
      <li><strong>Total Rewards:</strong> {{user.rewards_total}}</li>
    </ul>

    <div class="text-center">
      <button class="btn btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#editProfileModal">
        Edit Profile
      </button>
    </div>
  </section>

  {{!-- ── COMPLETED ASSIGNMENTS ─────────────────────────────────── --}}
  <section class="section-box p-4 rounded mt-5">
    <h2 class="mb-3"><i class="bi bi-check2-square"></i> Completed Assignments</h2>

    {{#if tasks.length}}
      <div class="table-responsive">
        <table class="table table-dark table-striped align-middle">
          <thead>
            <tr>
              <th>Title</th><th>Description</th>
              <th>Reward</th><th>Priority</th><th>Completed</th>
            </tr>
          </thead>
          <tbody>
            {{#each tasks}}
              <tr>
                <td>{{title}}</td>
                <td>{{description}}</td>
                <td>{{rewards}}</td>
                <td>{{priority}}</td>
                <td>{{due_date}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    {{else}}
      <p class="text-muted">No completed assignments yet.</p>
    {{/if}}
  </section>
</div>

{{!-- ── EDIT-PROFILE MODAL ──────────────────────────────────────── --}}
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Edit Profile</h5>
        <button type="button" class="btn-close btn-close-white"
                data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form id="editProfileForm" class="modal-body">
        <div class="mb-3">
          <label for="edit-username" class="form-label">Username</label>
          <input id="edit-username" name="username" type="text"
                 class="form-control" value="{{user.username}}" required>
        </div>

        <div class="mb-3">
          <label for="edit-email" class="form-label">Email</label>
          <input id="edit-email" name="email" type="email"
                 class="form-control" value="{{user.email}}" required>
        </div>

        <div class="mb-3">
          <label for="edit-password" class="form-label">New password</label>
          <input id="edit-password" name="password" type="password"
                 class="form-control"
                 placeholder="Leave blank to keep current">
        </div>

        <div class="modal-footer p-0 pt-3">
          <button type="button" class="btn btn-secondary"
                  data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save changes</button>
        </div>
      </form>

    </div>
  </div>
</div>

<script src="/js/profile.js"></script>
